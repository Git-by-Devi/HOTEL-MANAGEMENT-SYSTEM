{% extends "base.html" %}
{% block title %}Rooms{% endblock %}
{% block content %}

<!-- Add Room Form -->
<form action="{{ url_for('add_room') }}" method="POST">
    <label for="room_number">Room Number:</label>
    <input type="text" name="room_number" required>

    <label for="room_type">Room Type:</label>
    <select name="room_type">
        <option value="Single">Single</option>
        <option value="Double">Double</option>
        <option value="Suite">Suite</option>
    </select>

    <label for="price">Price (₹):</label>
    <input type="number" name="price" step="0.01" required>

    <button type="submit">Add Room</button>
</form>

<hr>

<!-- Filter by Room Type -->
<form method="GET" action="{{ url_for('rooms') }}" class="mb-3 d-flex align-items-center">
    <label for="room_type" class="me-2">Filter by Room Type:</label>
    <select name="room_type" id="room_type" class="form-select form-select-sm w-auto me-2">
        <option value="">All</option>
        <option value="Single">Single</option>
        <option value="Double">Double</option>
        <option value="Suite">Suite</option>
    </select>
    <button type="submit" class="btn btn-primary btn-sm">
        <i class="fas fa-search"></i> <!-- Search Icon -->
    </button>
</form>

<!-- Room Cards -->
<div class="row">
    {% for room in all_rooms %}
    <div class="col-md-4">
        <div class="card p-3 mb-3">
            <h4>Room {{ room.room_number }}</h4>
            <p>Type: {{ room.room_type }}</p>
            <p>Price: ₹{{ room.price }}</p>

            {% if room.is_available %}
                <a href="/add_reservation?room_id={{ room.id }}" class="btn btn-primary btn-sm">Book Now</a>
            {% else %}
                <button class="btn btn-secondary btn-sm" disabled>
                    <i class="fas fa-times"></i> <!-- Cross Icon -->
                </button>
            {% endif %}

            <!-- Delete Room -->
            <form action="{{ url_for('delete_room', room_id=room.id) }}" method="post" 
                  onsubmit="return confirm('Are you sure you want to delete Room {{ room.room_number }}?');">
                <button type="submit" class="btn btn-danger btn-sm mt-2">
                    <i class="fas fa-trash"></i> <!-- Trash Icon -->
                </button>
            </form>
        </div>
    </div>

    {% else %}
    <p>No available rooms found.</p>
    {% endfor %}
</div>
<a href="{{ url_for('recommend_rooms') }}" class="btn btn-primary btn-sm shadow-sm rounded-pill px-1 py-1">
    ⭐ Recommended Rooms
</a>

{% endblock %}
